version: '3.8'

services:

  backend:
    build:
      context: .
    image: marekmatczak/mts-backend
    entrypoint:
     - java
     - -jar
     - -Dspring.profiles.active=postgres
     - /app.jar
     - --server.port=80
     - --spring.datasource.url=jdbc:postgresql://db:5432/postgres
     - --spring.datasource.username=postgres
     - --spring.datasource.password=secret
    ports:
      - "80:80"
    depends_on:
      - db

  db:
    image: postgres
    environment:
      POSTGRES_PASSWORD: secret
